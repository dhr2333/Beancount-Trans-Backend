openapi: 3.0.3
info:
  title: Beancount-Trans API
  version: 1.0.0
  description: Beancount交易记录转换和管理系统的API文档
paths:
  /api/account/:
    get:
      operationId: account_list
      description: |-
        账户管理视图集

        提供基于Beancount的树形账户管理功能，包括：
        - 账户的增删改查
        - 树形结构展示
        - 账户迁移
        - 账户映射

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: query
        name: account_type
        schema:
          type: string
          enum:
          - Assets
          - Equity
          - Expenses
          - Income
          - Liabilities
        description: |-
          按账户类型过滤

          * `Assets` - 资产账户
          * `Liabilities` - 负债账户
          * `Equity` - 权益账户
          * `Income` - 收入账户
          * `Expenses` - 支出账户
      - in: query
        name: enable
        schema:
          type: boolean
        description: 按启用状态过滤
      - in: query
        name: has_children
        schema:
          type: boolean
        description: 是否有子账户
      - in: query
        name: has_mappings
        schema:
          type: boolean
        description: 是否有相关映射
      - in: query
        name: search
        schema:
          type: string
        description: 搜索账户名称
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
          description: ''
    post:
      operationId: account_create
      description: |-
        账户管理视图集

        提供基于Beancount的树形账户管理功能，包括：
        - 账户的增删改查
        - 树形结构展示
        - 账户迁移
        - 账户映射

        支持匿名用户访问id=1用户的数据（只读）
      tags:
      - account
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AccountRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AccountRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
  /api/account-templates/:
    get:
      operationId: account_templates_list
      description: 账户模板管理视图集
      tags:
      - account-templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AccountTemplateList'
          description: ''
    post:
      operationId: account_templates_create
      description: 账户模板管理视图集
      tags:
      - account-templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTemplateDetail'
          description: ''
  /api/account-templates/{id}/:
    get:
      operationId: account_templates_retrieve
      description: 账户模板管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账户模板.
        required: true
      tags:
      - account-templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTemplateDetail'
          description: ''
    put:
      operationId: account_templates_update
      description: 账户模板管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账户模板.
        required: true
      tags:
      - account-templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTemplateDetail'
          description: ''
    patch:
      operationId: account_templates_partial_update
      description: 账户模板管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账户模板.
        required: true
      tags:
      - account-templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAccountTemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAccountTemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAccountTemplateDetailRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTemplateDetail'
          description: ''
    delete:
      operationId: account_templates_destroy
      description: 账户模板管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账户模板.
        required: true
      tags:
      - account-templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/account-templates/{id}/apply/:
    post:
      operationId: account_templates_apply_create
      description: |-
        应用模板到用户账户

        请求体: {
            "action": "merge|overwrite",
            "conflict_resolution": "skip|overwrite"
        }
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账户模板.
        required: true
      tags:
      - account-templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AccountTemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTemplateDetail'
          description: ''
  /api/account/{id}/:
    get:
      operationId: account_retrieve
      description: |-
        账户管理视图集

        提供基于Beancount的树形账户管理功能，包括：
        - 账户的增删改查
        - 树形结构展示
        - 账户迁移
        - 账户映射

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
    put:
      operationId: account_update
      description: |-
        账户管理视图集

        提供基于Beancount的树形账户管理功能，包括：
        - 账户的增删改查
        - 树形结构展示
        - 账户迁移
        - 账户映射

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AccountRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AccountRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AccountRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
    patch:
      operationId: account_partial_update
      description: |-
        账户管理视图集

        提供基于Beancount的树形账户管理功能，包括：
        - 账户的增删改查
        - 树形结构展示
        - 账户迁移
        - 账户映射

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAccountRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAccountRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAccountRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
    delete:
      operationId: account_destroy
      description: 删除账户（有映射时需要提供迁移目标账户）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/account/{id}/mappings/:
    get:
      operationId: account_mappings_retrieve
      description: 获取账户相关的映射
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
  /api/account/{id}/migration_candidates/:
    get:
      operationId: account_migration_candidates_retrieve
      description: 获取可用的迁移目标账户列表
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 账本账户.
        required: true
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
          description: ''
  /api/account/tree/:
    get:
      operationId: account_tree_retrieve
      description: 获取账户树形结构
      tags:
      - account
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccountTree'
          description: ''
  /api/assets/:
    get:
      operationId: assets_list
      description: 资产映射管理视图集
      tags:
      - assets
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Assets'
          description: ''
    post:
      operationId: assets_create
      description: 重写create方法，实现批量创建
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Assets'
          description: ''
  /api/assets/{id}/:
    get:
      operationId: assets_retrieve
      description: 资产映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 资产映射.
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Assets'
          description: ''
    put:
      operationId: assets_update
      description: 资产映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 资产映射.
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/AssetsRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Assets'
          description: ''
    patch:
      operationId: assets_partial_update
      description: 资产映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 资产映射.
        required: true
      tags:
      - assets
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedAssetsRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedAssetsRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedAssetsRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Assets'
          description: ''
    delete:
      operationId: assets_destroy
      description: 资产映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 资产映射.
        required: true
      tags:
      - assets
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/config/:
    get:
      operationId: config_retrieve
      description: 获取当前用户配置
      tags:
      - config
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
    put:
      operationId: config_update
      description: 更新当前用户配置
      tags:
      - config
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/directories/:
    get:
      operationId: directories_list
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      tags:
      - directories
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Directory'
          description: ''
    post:
      operationId: directories_create
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      tags:
      - directories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
  /api/directories/{id}/:
    get:
      operationId: directories_retrieve
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this directory.
        required: true
      tags:
      - directories
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
    put:
      operationId: directories_update
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this directory.
        required: true
      tags:
      - directories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/DirectoryRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
    patch:
      operationId: directories_partial_update
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this directory.
        required: true
      tags:
      - directories
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedDirectoryRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedDirectoryRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedDirectoryRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
    delete:
      operationId: directories_destroy
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this directory.
        required: true
      tags:
      - directories
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/directories/{id}/contents/:
    get:
      operationId: directories_contents_retrieve
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this directory.
        required: true
      tags:
      - directories
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
  /api/directories/root_contents/:
    get:
      operationId: directories_root_contents_retrieve
      description: |-
        目录管理视图集

        提供目录的增删改查功能，包括获取目录内容等操作。
        所有操作都需要用户认证，且只能操作自己的数据。
      tags:
      - directories
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Directory'
          description: ''
  /api/expense/:
    get:
      operationId: expense_list
      description: 支出映射管理视图集
      tags:
      - expense
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Expense'
          description: ''
    post:
      operationId: expense_create
      description: 重写create方法，实现批量创建
      tags:
      - expense
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
          description: ''
  /api/expense/{id}/:
    get:
      operationId: expense_retrieve
      description: 支出映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 支出映射.
        required: true
      tags:
      - expense
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
          description: ''
    put:
      operationId: expense_update
      description: 支出映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 支出映射.
        required: true
      tags:
      - expense
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
          description: ''
    patch:
      operationId: expense_partial_update
      description: 支出映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 支出映射.
        required: true
      tags:
      - expense
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedExpenseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedExpenseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedExpenseRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
          description: ''
    delete:
      operationId: expense_destroy
      description: 支出映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 支出映射.
        required: true
      tags:
      - expense
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/expense/batch_update_account/:
    post:
      operationId: expense_batch_update_account_create
      description: 批量更新支出映射的账户
      tags:
      - expense
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
          description: ''
  /api/fava/:
    get:
      operationId: fava_retrieve
      description: |-
        触发启动fava容器并重定向

        该视图的URL可能是`/api/fava/`（不带uuid）
        它检查当前用户的`FavaInstance`，如果不存在或者状态不是运行中，则启动一个新的容器（同步启动，等待容器启动完成，然后更新`FavaInstance`的状态为`running`）
        然后可以直接访问fava容器的页面
      tags:
      - fava
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/fava/stop/:
    post:
      operationId: fava_stop_create
      description: |-
        停止用户的Fava实例

        该视图用于在用户退出登录时停止其Fava容器实例
      tags:
      - fava
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/files/:
    get:
      operationId: files_list
      tags:
      - files
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/File'
          description: ''
    post:
      operationId: files_create
      tags:
      - files
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FileRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
  /api/files/{id}/:
    get:
      operationId: files_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this file.
        required: true
      tags:
      - files
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
    put:
      operationId: files_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this file.
        required: true
      tags:
      - files
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/FileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/FileRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
    patch:
      operationId: files_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this file.
        required: true
      tags:
      - files
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedFileRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedFileRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedFileRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
    delete:
      operationId: files_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this file.
        required: true
      tags:
      - files
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/files/{id}/download/:
    get:
      operationId: files_download_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this file.
        required: true
      tags:
      - files
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
  /api/files/search/:
    get:
      operationId: files_search_retrieve
      tags:
      - files
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/File'
          description: ''
  /api/income/:
    get:
      operationId: income_list
      description: 收入映射管理视图集
      tags:
      - income
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Income'
          description: ''
    post:
      operationId: income_create
      description: 重写create方法，实现批量创建
      tags:
      - income
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          description: ''
  /api/income/{id}/:
    get:
      operationId: income_retrieve
      description: 收入映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 收入映射.
        required: true
      tags:
      - income
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          description: ''
    put:
      operationId: income_update
      description: 收入映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 收入映射.
        required: true
      tags:
      - income
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          description: ''
    patch:
      operationId: income_partial_update
      description: 收入映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 收入映射.
        required: true
      tags:
      - income
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedIncomeRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedIncomeRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedIncomeRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          description: ''
    delete:
      operationId: income_destroy
      description: 收入映射管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 收入映射.
        required: true
      tags:
      - income
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/tags/:
    get:
      operationId: tags_list
      description: |-
        标签管理视图集

        提供标签管理功能，包括：
        - 标签的增删改查
        - 树形结构展示
        - 批量操作

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: query
        name: enable
        schema:
          type: boolean
        description: 是否启用
      - in: query
        name: is_root
        schema:
          type: boolean
        description: 是否为根标签
      - in: query
        name: name
        schema:
          type: string
        description: 标签名称（模糊匹配）
      - in: query
        name: parent
        schema:
          type: integer
        description: 父标签ID
      - in: query
        name: parent__name
        schema:
          type: string
        description: 父标签名称（模糊匹配）
      tags:
      - tags
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tag'
          description: ''
    post:
      operationId: tags_create
      description: |-
        标签管理视图集

        提供标签管理功能，包括：
        - 标签的增删改查
        - 树形结构展示
        - 批量操作

        支持匿名用户访问id=1用户的数据（只读）
      tags:
      - tags
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TagRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TagRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TagRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
          description: ''
  /api/tags/{id}/:
    get:
      operationId: tags_retrieve
      description: |-
        标签管理视图集

        提供标签管理功能，包括：
        - 标签的增删改查
        - 树形结构展示
        - 批量操作

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 标签.
        required: true
      tags:
      - tags
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
          description: ''
    put:
      operationId: tags_update
      description: |-
        标签管理视图集

        提供标签管理功能，包括：
        - 标签的增删改查
        - 树形结构展示
        - 批量操作

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 标签.
        required: true
      tags:
      - tags
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TagRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TagRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TagRequest'
        required: true
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
          description: ''
    patch:
      operationId: tags_partial_update
      description: |-
        标签管理视图集

        提供标签管理功能，包括：
        - 标签的增删改查
        - 树形结构展示
        - 批量操作

        支持匿名用户访问id=1用户的数据（只读）
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 标签.
        required: true
      tags:
      - tags
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTagRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTagRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTagRequest'
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
          description: ''
    delete:
      operationId: tags_destroy
      description: |-
        删除标签

        请求体（可选）:
        {
            "force": false  # 是否强制删除（包括子标签）
        }
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 标签.
        required: true
      tags:
      - tags
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/tags/{id}/mappings/:
    get:
      operationId: tags_mappings_retrieve
      description: 获取标签相关的映射
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 标签.
        required: true
      tags:
      - tags
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tag'
          description: ''
  /api/tags/tree/:
    get:
      operationId: tags_tree_retrieve
      description: |-
        获取标签树形结构

        返回所有根标签及其子标签的树形结构
      tags:
      - tags
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagTree'
          description: ''
  /api/templates/:
    get:
      operationId: templates_list
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TemplateList'
          description: ''
    post:
      operationId: templates_create
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
          description: ''
  /api/templates/{id}/:
    get:
      operationId: templates_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 映射模板.
        required: true
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
          description: ''
    put:
      operationId: templates_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 映射模板.
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
          description: ''
    patch:
      operationId: templates_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 映射模板.
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTemplateDetailRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
          description: ''
    delete:
      operationId: templates_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 映射模板.
        required: true
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/templates/{id}/apply/:
    post:
      operationId: templates_apply_create
      description: 应用模板到用户映射
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 映射模板.
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TemplateDetailRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
          description: ''
  /api/templates/{template_pk}/items/:
    get:
      operationId: templates_items_list
      description: 模板项管理视图集
      parameters:
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TemplateItem'
          description: ''
    post:
      operationId: templates_items_create
      description: 模板项管理视图集
      parameters:
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateItem'
          description: ''
  /api/templates/{template_pk}/items/{id}/:
    get:
      operationId: templates_items_retrieve
      description: 模板项管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 模板项.
        required: true
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateItem'
          description: ''
    put:
      operationId: templates_items_update
      description: 模板项管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 模板项.
        required: true
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TemplateItemRequest'
        required: true
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateItem'
          description: ''
    patch:
      operationId: templates_items_partial_update
      description: 模板项管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 模板项.
        required: true
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedTemplateItemRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedTemplateItemRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedTemplateItemRequest'
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateItem'
          description: ''
    delete:
      operationId: templates_items_destroy
      description: 模板项管理视图集
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this 模板项.
        required: true
      - in: path
        name: template_pk
        schema:
          type: string
          pattern: ^\d+$
        required: true
      tags:
      - templates
      security:
      - jwtAuth: []
      - cookieAuth: []
      - Bearer: []
      responses:
        '204':
          description: No response body
  /api/token/refresh/:
    post:
      operationId: token_refresh_create
      description: |-
        Takes a refresh type JSON web token and returns an access type JSON web
        token if the refresh token is valid.
      tags:
      - token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/TokenRefreshRequest'
        required: true
      security:
      - Bearer: []
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenRefresh'
          description: ''
  /api/translate/multi:
    post:
      operationId: translate_multi_create
      description: |-
        多账单解析接口

        该接口实现解析单个/多个文件

        Args:
            files (list): 上传的文件列表

        Returns:
            包含Celery任务组 ID 的响应
      tags:
      - translate
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/translate/reparse:
    post:
      operationId: translate_reparse_create
      description: |-
        AI反馈重新解析接口

        此视图处理AI反馈条目的重新解析请求，对指定条目执行新的分析并返回更新后的解析结果。

        Args:
            entry_id (str): 要重新解析的条目ID
            user_selected_key (str): 用户选择的映射关键字

        Returns:
            entry_id (str): 要重新解析的条目ID
            formatted (str): 解析后的条目内容
      tags:
      - translate
      security:
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
  /api/translate/task_group_status:
    get:
      operationId: translate_task_group_status_retrieve
      description: 任务组状态查询接口
      tags:
      - translate
      security:
      - jwtAuth: []
      - Bearer: []
      responses:
        '200':
          description: No response body
  /api/translate/trans:
    post:
      operationId: translate_trans_create
      tags:
      - translate
      security:
      - Bearer: []
      - {}
      responses:
        '200':
          description: No response body
components:
  schemas:
    Account:
      type: object
      description: 账户基础序列化器
      properties:
        id:
          type: integer
          readOnly: true
        account:
          type: string
          title: 账户
          description: 账户路径
          maxLength: 128
        parent:
          type: integer
          nullable: true
          title: 父账户
          description: 父账户
        parent_account:
          type: string
          readOnly: true
        owner:
          type: integer
          readOnly: true
          title: 属主
          description: 属主
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
        account_type:
          type: string
          readOnly: true
        has_children:
          type: boolean
          readOnly: true
        mapping_count:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - account
      - account_type
      - created
      - has_children
      - id
      - mapping_count
      - modified
      - owner
      - parent_account
    AccountRequest:
      type: object
      description: 账户基础序列化器
      properties:
        account:
          type: string
          minLength: 1
          title: 账户
          description: 账户路径
          maxLength: 128
        parent:
          type: integer
          nullable: true
          title: 父账户
          description: 父账户
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
      required:
      - account
    AccountSummary:
      type: object
      description: 账户摘要序列化器，用于在映射中显示账户信息
      properties:
        id:
          type: integer
          readOnly: true
        account:
          type: string
          title: 账户
          description: 账户路径
          maxLength: 128
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
      required:
      - account
      - id
    AccountSummaryRequest:
      type: object
      description: 账户摘要序列化器，用于在映射中显示账户信息
      properties:
        account:
          type: string
          minLength: 1
          title: 账户
          description: 账户路径
          maxLength: 128
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
      required:
      - account
    AccountTemplateDetail:
      type: object
      description: 账户模板详情序列化器（含模板项）
      properties:
        id:
          type: integer
          readOnly: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/AccountTemplateItem'
        owner_name:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
        name:
          type: string
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
        owner:
          type: integer
          readOnly: true
      required:
      - created
      - id
      - modified
      - name
      - owner
      - owner_name
    AccountTemplateDetailRequest:
      type: object
      description: 账户模板详情序列化器（含模板项）
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AccountTemplateItemRequest'
        name:
          type: string
          minLength: 1
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
      required:
      - name
    AccountTemplateItem:
      type: object
      description: 账户模板项序列化器
      properties:
        id:
          type: integer
          readOnly: true
        account_path:
          type: string
          description: 账户路径
          maxLength: 128
        enable:
          type: boolean
          description: 默认启用状态
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - account_path
      - created
      - id
      - modified
    AccountTemplateItemRequest:
      type: object
      description: 账户模板项序列化器
      properties:
        account_path:
          type: string
          minLength: 1
          description: 账户路径
          maxLength: 128
        enable:
          type: boolean
          description: 默认启用状态
      required:
      - account_path
    AccountTemplateList:
      type: object
      description: 账户模板列表序列化器
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
        owner:
          type: integer
          readOnly: true
        owner_name:
          type: string
          readOnly: true
        items_count:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - created
      - id
      - items_count
      - modified
      - name
      - owner
      - owner_name
    AccountTree:
      type: object
      description: 账户树形结构序列化器
      properties:
        id:
          type: integer
          readOnly: true
        account:
          type: string
          title: 账户
          description: 账户路径
          maxLength: 128
        parent:
          type: integer
          nullable: true
          title: 父账户
          description: 父账户
        parent_account:
          type: string
          readOnly: true
        owner:
          type: integer
          readOnly: true
          title: 属主
          description: 属主
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
        account_type:
          type: string
          readOnly: true
        mapping_count:
          type: string
          readOnly: true
        children:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - account
      - account_type
      - children
      - created
      - id
      - mapping_count
      - modified
      - owner
      - parent_account
    Assets:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        owner:
          type: string
          title: 用户名
          description: 必填；长度为150个字符或以下；只能包含字母、数字、特殊字符“@”、“.”、“-”和“_”。
          readOnly: true
        key:
          type: string
          description: 关键字
          maxLength: 16
        full:
          type: string
          description: 账户名称
          maxLength: 16
        assets:
          allOf:
          - $ref: '#/components/schemas/AccountSummary'
          readOnly: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagSummary'
          readOnly: true
      required:
      - assets
      - full
      - id
      - key
      - owner
      - tags
    AssetsRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        full:
          type: string
          minLength: 1
          description: 账户名称
          maxLength: 16
        assets_id:
          type: integer
          writeOnly: true
          nullable: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
      required:
      - full
      - key
    Directory:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        owner:
          type: string
          title: 用户名
          description: 必填；长度为150个字符或以下；只能包含字母、数字、特殊字符“@”、“.”、“-”和“_”。
          readOnly: true
        name:
          type: string
          maxLength: 255
        parent:
          type: integer
          nullable: true
        path:
          type: string
          readOnly: true
        created_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - name
      - owner
      - parent
      - path
    DirectoryRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        parent:
          type: integer
          nullable: true
      required:
      - name
      - parent
    Expense:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        owner:
          type: string
          title: 用户名
          description: 必填；长度为150个字符或以下；只能包含字母、数字、特殊字符“@”、“.”、“-”和“_”。
          readOnly: true
        key:
          type: string
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
        expend:
          allOf:
          - $ref: '#/components/schemas/AccountSummary'
          readOnly: true
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        enable:
          type: boolean
          default: true
          description: 是否启用
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagSummary'
          readOnly: true
      required:
      - expend
      - id
      - owner
      - payee
      - tags
    ExpenseRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
        expend_id:
          type: integer
          writeOnly: true
          nullable: true
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
      required:
      - payee
    File:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        directory:
          type: integer
        owner:
          type: string
          title: 用户名
          description: 必填；长度为150个字符或以下；只能包含字母、数字、特殊字符“@”、“.”、“-”和“_”。
          readOnly: true
        name:
          type: string
          maxLength: 255
        size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
        uploaded_at:
          type: string
          format: date-time
          readOnly: true
        content_type:
          type: string
          maxLength: 100
        directory_name:
          type: string
          readOnly: true
        parse_status:
          type: string
          readOnly: true
        error_message:
          type: string
          readOnly: true
      required:
      - content_type
      - directory
      - directory_name
      - error_message
      - id
      - name
      - owner
      - parse_status
      - size
      - uploaded_at
    FileRequest:
      type: object
      properties:
        directory:
          type: integer
        name:
          type: string
          minLength: 1
          maxLength: 255
        size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
        content_type:
          type: string
          minLength: 1
          maxLength: 100
      required:
      - content_type
      - directory
      - name
      - size
    Income:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        owner:
          type: string
          title: 用户名
          description: 必填；长度为150个字符或以下；只能包含字母、数字、特殊字符“@”、“.”、“-”和“_”。
          readOnly: true
        key:
          type: string
          description: 关键字
          maxLength: 16
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 8
        income:
          allOf:
          - $ref: '#/components/schemas/AccountSummary'
          readOnly: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagSummary'
          readOnly: true
      required:
      - id
      - income
      - key
      - owner
      - tags
    IncomeRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 8
        income_id:
          type: integer
          writeOnly: true
          nullable: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
      required:
      - key
    PatchedAccountRequest:
      type: object
      description: 账户基础序列化器
      properties:
        account:
          type: string
          minLength: 1
          title: 账户
          description: 账户路径
          maxLength: 128
        parent:
          type: integer
          nullable: true
          title: 父账户
          description: 父账户
        enable:
          type: boolean
          title: 是否启用
          description: 启用状态
    PatchedAccountTemplateDetailRequest:
      type: object
      description: 账户模板详情序列化器（含模板项）
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AccountTemplateItemRequest'
        name:
          type: string
          minLength: 1
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
    PatchedAssetsRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        full:
          type: string
          minLength: 1
          description: 账户名称
          maxLength: 16
        assets_id:
          type: integer
          writeOnly: true
          nullable: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
    PatchedDirectoryRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        parent:
          type: integer
          nullable: true
    PatchedExpenseRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
        expend_id:
          type: integer
          writeOnly: true
          nullable: true
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
    PatchedFileRequest:
      type: object
      properties:
        directory:
          type: integer
        name:
          type: string
          minLength: 1
          maxLength: 255
        size:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
        content_type:
          type: string
          minLength: 1
          maxLength: 100
    PatchedIncomeRequest:
      type: object
      properties:
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 8
        income_id:
          type: integer
          writeOnly: true
          nullable: true
        enable:
          type: boolean
          default: true
          description: 是否启用
        tag_ids:
          type: array
          items:
            type: integer
            writeOnly: true
          writeOnly: true
          description: 标签ID列表
    PatchedTagRequest:
      type: object
      description: 标签基础序列化器
      properties:
        name:
          type: string
          minLength: 1
          description: 标签名称
          maxLength: 64
        description:
          type: string
          description: 标签描述
        enable:
          type: boolean
          description: 是否启用
    PatchedTemplateDetailRequest:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/TemplateItemRequest'
        name:
          type: string
          minLength: 1
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          description: |-
            模板类型

            * `expense` - 支出
            * `income` - 收入
            * `assets` - 资产
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
    PatchedTemplateItemRequest:
      type: object
      properties:
        account_id:
          type: integer
          writeOnly: true
          nullable: true
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
          description: 收款方
          maxLength: 32
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 32
        full:
          type: string
          nullable: true
          description: 账户全称
          maxLength: 32
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        template:
          type: integer
    Tag:
      type: object
      description: 标签基础序列化器
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: 标签名称
          maxLength: 64
        parent:
          type: integer
          readOnly: true
          nullable: true
          description: 父标签
        parent_name:
          type: string
          readOnly: true
        full_path:
          type: string
          readOnly: true
        description:
          type: string
          description: 标签描述
        owner:
          type: integer
          readOnly: true
        enable:
          type: boolean
          description: 是否启用
        has_children:
          type: string
          readOnly: true
        mapping_count:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - created
      - full_path
      - has_children
      - id
      - mapping_count
      - modified
      - name
      - owner
      - parent
      - parent_name
    TagRequest:
      type: object
      description: 标签基础序列化器
      properties:
        name:
          type: string
          minLength: 1
          description: 标签名称
          maxLength: 64
        description:
          type: string
          description: 标签描述
        enable:
          type: boolean
          description: 是否启用
      required:
      - name
    TagSummary:
      type: object
      description: 标签摘要序列化器，用于在映射中显示标签信息
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: 标签名称
          maxLength: 64
        full_path:
          type: string
          readOnly: true
        enable:
          type: boolean
          description: 是否启用
      required:
      - full_path
      - id
      - name
    TagSummaryRequest:
      type: object
      description: 标签摘要序列化器，用于在映射中显示标签信息
      properties:
        name:
          type: string
          minLength: 1
          description: 标签名称
          maxLength: 64
        enable:
          type: boolean
          description: 是否启用
      required:
      - name
    TagTree:
      type: object
      description: 标签树形结构序列化器
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: 标签名称
          maxLength: 64
        parent:
          type: integer
          nullable: true
          description: 父标签
        parent_name:
          type: string
          readOnly: true
        full_path:
          type: string
          readOnly: true
        description:
          type: string
          description: 标签描述
        owner:
          type: integer
          readOnly: true
        enable:
          type: boolean
          description: 是否启用
        mapping_count:
          type: string
          readOnly: true
        children:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - children
      - created
      - full_path
      - id
      - mapping_count
      - modified
      - name
      - owner
      - parent_name
    TemplateDetail:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        items:
          type: array
          items:
            $ref: '#/components/schemas/TemplateItem'
        owner_name:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
        name:
          type: string
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          description: |-
            模板类型

            * `expense` - 支出
            * `income` - 收入
            * `assets` - 资产
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
        owner:
          type: integer
          readOnly: true
      required:
      - created
      - id
      - modified
      - name
      - owner
      - owner_name
      - type
    TemplateDetailRequest:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/TemplateItemRequest'
        name:
          type: string
          minLength: 1
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          description: |-
            模板类型

            * `expense` - 支出
            * `income` - 收入
            * `assets` - 资产
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
      required:
      - name
      - type
    TemplateItem:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        account:
          allOf:
          - $ref: '#/components/schemas/AccountSummary'
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
        key:
          type: string
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
          description: 收款方
          maxLength: 32
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 32
        full:
          type: string
          nullable: true
          description: 账户全称
          maxLength: 32
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        template:
          type: integer
      required:
      - account
      - created
      - id
      - key
      - modified
      - template
    TemplateItemRequest:
      type: object
      properties:
        account_id:
          type: integer
          writeOnly: true
          nullable: true
        key:
          type: string
          minLength: 1
          description: 关键字
          maxLength: 16
        payee:
          type: string
          nullable: true
          description: 收款方
          maxLength: 32
        payer:
          type: string
          nullable: true
          description: 付款方
          maxLength: 32
        full:
          type: string
          nullable: true
          description: 账户全称
          maxLength: 32
        currency:
          type: string
          nullable: true
          description: 货币代码
          maxLength: 24
        template:
          type: integer
      required:
      - key
      - template
    TemplateList:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          description: 模板名称
          maxLength: 32
        description:
          type: string
          description: 模板描述
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          description: |-
            模板类型

            * `expense` - 支出
            * `income` - 收入
            * `assets` - 资产
        is_public:
          type: boolean
          description: 是否公开
        is_official:
          type: boolean
          description: 是否官方
        version:
          type: string
          description: 版本号
          maxLength: 16
        update_notes:
          type: string
          nullable: true
          description: 更新说明
        owner:
          type: integer
          readOnly: true
        owner_name:
          type: string
          readOnly: true
        created:
          type: string
          format: date-time
          readOnly: true
        modified:
          type: string
          format: date-time
          readOnly: true
      required:
      - created
      - id
      - modified
      - name
      - owner
      - owner_name
      - type
    TokenRefresh:
      type: object
      properties:
        access:
          type: string
          readOnly: true
      required:
      - access
    TokenRefreshRequest:
      type: object
      properties:
        refresh:
          type: string
          writeOnly: true
          minLength: 1
      required:
      - refresh
    TypeEnum:
      enum:
      - expense
      - income
      - assets
      type: string
      description: |-
        * `expense` - 支出
        * `income` - 收入
        * `assets` - 资产
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
    jwtAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
